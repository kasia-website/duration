<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duration</title>

    <style>:root{--custom-1:#486902;--custom-2:#A9BF04;--custom-3:#CCD96C;--custom-4:#A6A049;--custom-5:#D9CBA0;--custom-submit:#823F09;--custom-submit-dark:#301703;--custom-focus:var(--custom-1);--white:#FFF;--border-radius:0;background:var(--custom-2)}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}*{box-sizing:border-box;font-family:inherit;line-height:inherit;margin:0;padding:0}* + *,.list-with-margin > * + li{margin-top:1em}.sr-only + *,legend + *,li{margin-top:0}dl,ol,ul{padding-left:2.5rem}body{background:#fff;border-radius:var(--border-radius);font-family:Arial, sans-serif;line-height:1.5;margin:2vw;padding:2vw;--color-error:red;--color-success:green}h1{font-size:2rem;line-height:1.2;text-align:center}h2{align-items:center;display:flex;padding-top:1rem}em{color:var(--custom-1);font-weight:bold}fieldset{border:none;display:flex;flex-direction:column;padding:0.5rem 0}figcaption{border-top:1px solid;display:inline-block;font-size:0.875em;margin-top:2rem;padding:0.75rem 0.5rem 0}figure{background:rgba(0,0,0,0.1);border:2px solid;padding:1rem}legend{margin-left:1rem}label{display:flex;flex-direction:column;font-weight:bold}output{display:block;margin-left:auto;margin-right:auto;max-width:32rem}input,pre,svg,textarea{border:0.125rem solid;border-color:var(--custom-5);border-radius:var(--border-radius);color:inherit;font-family:inherit;font-size:inherit;height:auto;line-height:inherit;max-width:100%}input{margin-top:0.5rem;padding:0.5rem;max-width:20rem}input:focus,textarea:focus{border-color:var(--custom-focus);box-shadow:0 0 6px 3px var(--custom-4);outline:none}textarea{padding:1em;min-height:20em}pre{background:rgba(0,0,0,0.1);border-color:var(--custom-1);display:block;font-family:monospace;overflow-x:auto;padding:1em}code{font-family:monospace}a{color:inherit;position:relative;text-decoration-color:var(--custom-1, currentColor)}a::before{background-color:var(--custom-1, currentColor);bottom:3px;content:"";left:0;height:2px;position:absolute;transition:0.2s width;width:0}a:focus::before,a:hover::before{text-decoration-color:transparent;width:100%}nav{border-bottom:3px solid;border-color:var(--custom-1);margin-left:-2vw;margin-right:-2vw;padding:1rem}nav ul{display:flex;justify-content:space-evenly;list-style-type:none;padding-left:0;white-space:nowrap}nav a{display:inline-block;margin-top:0;padding:0.5rem 0.75rem 0;text-decoration-color:transparent}nav a::first-letter{font-size:1.25em;font-weight:bold}nav a::before{left:0.75rem}nav a:focus::before,nav a:hover::before{width:calc(100% - 1.5rem)}[role="button"],[type="submit"],button{background:var(--custom-1);border:none;border-radius:var(--border-radius);color:var(--white);font-size:inherit;font-weight:bold;margin-bottom:1em;padding:0.75rem 1.5rem;text-transform:uppercase}[role="button"]:focus,[type="submit"]:focus,button:focus{background:var(--custom-4);box-shadow:0 0 6px 3px var(--custom-4);outline:none}[type="submit"],form button:not([type]){background:var(--custom-submit)}[type="submit"]:focus,form button:not([type]):focus{background:var(--custom-submit-dark)}input[type=range]{-webkit-appearance:none;width:100%;margin:1rem 0}input[type=range]::-webkit-slider-runnable-track{width:100%;height:1rem;cursor:pointer;border-radius:0;border:0.125rem solid}input[type=range]::-webkit-slider-thumb{border:0.125rem solid;border-radius:var(--border-radius);height:3rem;width:1.5rem;cursor:pointer;-webkit-appearance:none;margin-top:-1rem}input[type=range]::-moz-range-track{width:100%;height:1rem;cursor:pointer;border-radius:0;border:none}input[type=range]::-moz-range-thumb{background:var(--custom-2);border:0.125rem solid;height:3rem;width:1.5rem;border-radius:var(--border-radius);cursor:pointer}input[type=range]::-ms-track{width:100%;height:1rem;cursor:pointer}input[type=range]::-ms-fill-lower{border:0.125rem solid;border-radius:0}input[type=range]::-ms-fill-upper{border:0.125rem solid;border-radius:0}input[type=range]::-ms-thumb{border:0.125rem solid;border-radius:var(--border-radius);width:1.5rem;cursor:pointer;height:1rem}:root{--custom-1:#03819D;--custom-2:#F2CED1;--custom-3:#D93D4A;--custom-4:#F2C84B;--custom-5:#D98E04}body{margin:2vw auto;max-width:60rem}em{color:var(--custom-4)}fieldset{padding:0}figure{border-color:var(--custom-4)}label{display:flex;flex-direction:column}label small{margin-top:0.25rem;order:1}label input{margin-top:0.5rem}li,p{max-width:65ch}.inner-container{background:white;border:2px solid var(--custom-1);display:inline-flex;flex-direction:row;margin-top:0.5rem;max-width:320px;padding:0;width:100%}.duration-container legend{font-weight:bold;margin:0}.duration-container label{align-items:baseline;display:flex;flex-direction:row-reverse}.duration-container * + label{margin-top:0}.duration-container input{box-sizing:content-box;border:none;margin:0;text-align:right;width:2ch}.duration-container input:focus{background:var(--custom-2);box-shadow:none}.duration-container input[type="number"]{-moz-appearance:textfield}.duration-container input::-webkit-inner-spin-button,.duration-container input::-webkit-outer-spin-button{-webkit-appearance:none}.switcher{--color-1:white;--color-2:var(--custom-1);background:var(--color-1);border:1px solid;border-color:var(--color-2);border-radius:1rem;color:#222;display:inline-grid;font-size:0.85em;font-weight:normal;grid-template-areas:'label';grid-template-columns:max-content;line-height:1rem;margin-bottom:0;padding:0.25rem 2.25rem;position:relative;text-transform:initial;transition:0.5s;width:max-content}.switcher:focus{background-color:var(--color-1)}.switcher > *{grid-area:label;margin:0}.switcher > [aria-hidden]{visibility:hidden}.switcher::after{background:var(--color-2);border-radius:50%;bottom:1px;content:'';left:1px;padding:0;position:absolute;top:1px;transition:0.5s;width:calc(1.5rem - 2px)}.switcher.second{background:var(--color-2);color:var(--color-1)}.switcher.second::after{background:var(--color-1);left:calc(100% - 1.5rem + 1px)}.switcher + input{margin-top:0}</style>
</head>
<body>
<nav>
    <ul>
        <li><a href="#demos">Demos</a></li>
        <li><a href="#usage">Usage</a></li>
        <li><a href="#settings">Settings</a></li>
        <li><a href="#get-it-now">Get it now</a></li>
    </ul>
</nav>
<h1>Duration - javascript helper to input duration</h1>
<h2>Features</h2>
<ul>
    <li>Lightweight, dependency-free and customizable.</li>
    <li>Four display modes: converter, hiding original input, as supporting popup or switcher.</li>
    <li>Designed as progressive enhancement.</li>
    <li>Two supported formats: ISO and decimal time.</li>
</ul>
<h2 id="demos">Demos</h2>
<h3>Simple example</h3>
<p>Perfect for standard case.</p>
<figure>
    <label>
        <span>How much time do you spend debugging every day?</span>
        <input id="demo-simple" type="number" step="0.01" min="0">
    </label>
    <pre><code>new Duration('#demo-simple', {
    outputFormat: 'decimal'
});</code></pre>
    <figcaption>Text input with duration widget initialized.</figcaption>
</figure>
<h3>Preset value</h3>
<p>Set default value.</p>
<figure>
    <label>
        <span>How much time do you spend debugging every day?</span>
        <input id="demo-initial-value">
    </label>
    <pre><code>new Duration('#demo-initial-value', {
    initialValue: {
        minutes: '30',
        hours:   '1'
    },
    inputs: ['hours', 'minutes', 'seconds'],
    outputFormat: 'iso'
});</code></pre>
    <figcaption>Text input with duration widget initialized.</figcaption>
</figure>
<h3>Custom labels</h3>
<p>Label hours, minutes etc. as you wish. Useful for internationalization.</p>
<figure>
    <label>
        <span>How much time do you spend debugging every day?</span>
        <input id="demo-labels">
    </label>
    <pre><code>new Duration('#demo-labels', {
    inputs: ['hours', 'minutes', 'seconds'],
    labels: {
        seconds: 'seconds',
        minutes: 'minutes',
        hours  : 'hours'
    },
    outputFormat: 'decimal',
    precision: 6
});</code></pre>
    <figcaption>Text input with duration widget initialized.</figcaption>
</figure>
<h3>Hide original input</h3>
<p>Hide original input from users.</p>
<figure>
    <label>
        <span>How much time do you spend debugging every day?</span>
        <input id="demo-widget">
    </label>
    <pre><code>new Duration('#demo-widget', {
    display: 'widget',
    labels: {
        minutes: 'even longer minutes',
        hours  : 'long hours'
    },
    outputFormat: 'decimal'
});</code></pre>
    <figcaption>Text input with duration widget initialized.</figcaption>
</figure>
<h3>Display as popup</h3>
<p>Show widget when original input gets focus.</p>
<figure>
    <label>
        <span>How much time do you spend debugging every day?</span>
        <input id="demo-popup">
    </label>
    <pre><code>new Duration('#demo-popup', {
    display: 'popup',
    outputFormat: 'decimal'
});</code></pre>
    <figcaption>Text input with duration widget initialized.</figcaption>
</figure>
<h3>Switcher</h3>
<p>Let users decide how they want to input values.</p>
<figure>
    <label>
        <span>How much time do you spend debugging every day?</span>
        <input id="demo-switcher">
    </label>
    <pre><code>new Duration('#demo-switcher', {
    display: 'switcher',
    outputFormat: 'decimal',
    switcher: {
        firstLabel: 'decimal time',
        secondLabel: 'normal time'
    }
});</code></pre>
    <figcaption>Text input with duration widget initialized.</figcaption>
</figure>
<h2 id="usage">Getting started</h2>
<ol>
<li>
    <h3>Setup your HTML.</h3>
    <figure>
        <pre><code>&lt;input id=&quot;demo&quot;/&gt;</code></pre>
    </figure>
    <p>The input can be a child or a sibling of its label. Label is not obligatory, but definitely a best practise.</p>
</li>
<li>
    <h3>Add duration.js before your closing body tag.</h3>
    <figure>
        <pre><code>&lt;script src=&quot;duration.js&quot;&gt;&lt;/script&gt;</code></pre>
    </figure>
</li>
<li>
    <h3>Initialize duration.</h3>
    <figure>
        <pre><code>new Duration('#demo');</code></pre>
    </figure>
</li>
</ol>
<h2 id="settings">Settings</h2>
<ul class="list-with-margin">
    <li>
        <p><strong>cssClass</strong></p>
        <p><b>Type:</b> string</p>
        <p><b>Default:</b> <code>duration-initialized</code></p>
        <p>Class added to original input after initialization.</p>
    </li>
    <li>
        <p><strong>display</strong></p>
        <p><b>Type:</b> string</p>
        <p><b>Default:</b> <code>both</code></p>
        <p>Indicated widget display. Can take of of the following values:</p>
        <ul>
            <li><code>both</code> - original input and the widget are displayed.</li>
            <li><code>popup</code> - widget is displayed as popup when original input is gets focus.</li>
            <li><code>switcher</code> - only one of original input and widget is displayed at the same time. Switcher allows to toggle between original input and widget.</li>
            <li><code>widget</code> - original input is hidden, only widget is displayed.</li>
        </ul>
    </li>
    <li>
        <p><strong>initialValue</strong></p>
        <p><b>Type:</b> object</p>
        <p><b>Default:</b> <pre><code>initialValue: {
    years:   '0',
    months:  '0',
    weeks:   '0',
    days:    '0',
    hours:   '0',
    minutes: '0',
    seconds: '0'
}</code></pre></p>
        <p>Initial values for generated inputs.</p>
    </li>
    <li>
        <p><strong>inputs</strong></p>
        <p><b>Type:</b> array</p>
        <p><b>Default:</b> <code>['years', 'months', 'weeks', 'days', 'hours', 'minutes', 'seconds']</code></p>
        <p>List of inputs to be generated. If you set <code>outputFormat</code> to <code>decimal</code>, only hours and minutes inputs will be generated automatically (days, weeks, months and year are not valid in this context). Use <code>inputs</code> option to decide if you want seconds displayed as well.</p>
    </li>
    <li>
        <p><strong>labels</strong></p>
        <p><b>Type:</b> object</p>
        <p><b>Default:</b> <pre><code>labels: {
    years:   'yrs',
    months:  'mo',
    weeks:   'wks',
    days:    'days',
    hours:   'hrs',
    minutes: 'min',
    seconds: 'sec'
}</code></pre></p>
        <p>Default labels for generated inputs.</p>
    </li>
    <li>
        <p><strong>outputFormat</strong></p>
        <p><b>Type:</b> string</p>
        <p><b>Default:</b> <code>'iso'</code></p>
        <p>Can be set to <code>iso</code> or <code>decimal</code>.</p>
    </li>
    <li>
        <p><strong>precision</strong></p>
        <p><b>Type:</b> integer</p>
        <p><b>Default:</b> <code>2</code>, if <code>inputs</code> contains <code>seconds</code> precision is set to 5</code></p>
        <p>Precision used by the widget to format computation result. Be cautious with setting it too high to avoid problems with rounding errors.</p>
    </li>
    <li>
        <p><strong>screenReaderText</strong></p>
        <p><b>Type:</b> string</p>
        <p><b>Default:</b> <code>'sr-only'</code></p>
        <p>To avoid duplication for sighted users additional label can be hidden using specified class. Don't use <code>display: none</code> - it breaks accessibility of the widget.</p>
    </li>
    <li>
        <p><strong>sizingElement</strong></p>
        <p><b>Type:</b> string</p>
        <p><b>Default:</b> <code>'input'</code></p>
        <p>Can be set to <code>input</code> or <code>wrapper</code>.</p>
        <p>Used to size widget when display <code>popup</code> is used. Widget will be positioned and sized correspond to selected element. If no wrapper was given as option default (generated) wrapper will be used.</p>
    </li>
    <li>
        <p><strong>switcher</strong></p>
        <p><b>Type:</b> object</p>
        <p><b>Default:</b> <pre><code>switcher: {
    labelShows: 'alternative',
    firstLabel: 'Switch to input widget',
    secondLabel: 'Switch to preformatted value input',
    initialState: 'first'
}</code></pre> </p>
        <p>Values to configure switcher.</p>
        <ul>
            <li><code>labelShows</code> can take one of two values: <code>alternative</code> or <code>current</code>. If <code>current</code> is chosen, switcher in on state displays on label and off label in off state. If <code>alternative</code> is chosen, switcher displays the other option's name.</li>
            <li><code>firstLabel</code> describes switchers on state.</li>
            <li><code>secondLabel</code> describes switchers off state.</li>
            <li><code>initialState</code> can be <code>first</code> or <code>second</code> and indicated in which state the swicher should be after initialization.</li>
        </ul>
    </li>
    <li>
        <p><strong>wrapper</strong></p>
        <p><b>Type:</b> selector or HTMLElement</p>
        <p><b>Default:</b> false </p>
        <p>A wrapper containing original input and widget HTML. If set, given element will be used. If not set wrapping element (<code>div</code>) will be created automatically.</p>
    </li>
</ul>
<h2>Methods</h2>
<ul class="list-with-margin">
    <li>
        <p><strong>destroy</strong></p>
        <p>Removes all custom HTML code and event listeners.</p>
    </li>
</ul>
<h2>Events</h2>
<ul class="list-with-margin">
    <li>
        <p><strong>durationinitialized</strong></p>
        <p>Fired when all custom HTML code is ready and event listeners got initialized.</p>
    </li>
    <li>
        <p><strong>durationdestroyed</strong></p>
        <p>Fired after completing destroy action.</p>
    </li>
</ul>
<h2 id="get-it-now">Get it now</h2>
<p>
    You will find all the code on <a href="https://github.com/kasia-website/duration">Github</a>.
</p>
<script>(function(){let Duration=(function(){function Duration(element,settings){let _=this,deepProperties;_.consts={DESIGNATOR_YEARS:'Y',DESIGNATOR_MONTHS:'m',DESIGNATOR_WEEKS:'W',DESIGNATOR_DAYS:'D',DESIGNATOR_HOURS:'H',DESIGNATOR_MINUTES:'M',DESIGNATOR_SECONDS:'S',DISPLAY_BOTH:'both',DISPLAY_WIDGET:'widget',DISPLAY_POPUP:'popup',DISPLAY_SWITCHER:'switcher',FORMAT_DECIMAL:'decimal',FORMAT_ISO:'iso',SIZING_INPUT:'input',SIZING_WRAPPER:'wrapper',SWITCHER_STATE_FIRST:'first',SWITCHER_STATE_SECOND:'second',SHOWS_ALTERNATIVE:'alternative',SHOWS_CURRENT:'current'};_.defaults={cssClass:'duration-initialized',display:_.consts.DISPLAY_BOTH,initialValue:{years:'0',months:'0',weeks:'0',days:'0',hours:'0',minutes:'0',seconds:'0'},inputs:['years','months','weeks','days','hours','minutes','seconds'],labels:{years:'yrs',months:'mo',weeks:'wks',days:'days',hours:'hrs',minutes:'min',seconds:'sec'},leadingZeroes:false,outputFormat:_.consts.FORMAT_ISO,precision:2,screenReaderText:'sr-only',sizingElement:this.consts.SIZING_INPUT,switcher:{labelShows:_.consts.SHOWS_ALTERNATIVE,firstLabel:'Switch to input widget',secondLabel:'Switch to preformatted value input',initialState:_.consts.SWITCHER_STATE_FIRST},wrapper:false};if(!settings||!settings instanceof Object){settings={}}_.options={..._.defaults,...settings};deepProperties=['initialValue','labels','switcher'];deepProperties.forEach(function(property){if(settings.hasOwnProperty(property)){_.options[property]={..._.defaults[property],...settings[property]}}});if(_.options.outputFormat===_.consts.FORMAT_DECIMAL){if(!settings.hasOwnProperty('inputs')){_.options.inputs=['hours','minutes']}if(settings.hasOwnProperty('inputs')&&settings.inputs.indexOf('seconds')>-1&&!settings.hasOwnProperty('precision')){_.options.precision=5}}if(_.options.display===_.consts.DISPLAY_SWITCHER&&_.options.switcher.labelShows===_.consts.SHOWS_CURRENT){let tmp=_.options.switcher.firstLabel;_.options.switcher.firstLabel=_.options.switcher.secondLabel;_.options.switcher.secondLabel=tmp}_.additionalContainer=undefined;_.container=undefined;_.containerCssClass='duration-container';_.innerContainer=undefined;_.hours=undefined;_.inputs=[];_.label=undefined;_.legend=undefined;_.minutes=undefined;_.popupVisible=false;_.sizingElement=_.source;_.source=element instanceof HTMLElement?element:document.querySelector(element);_.switcher=undefined;_.switcherState=_.options.display===_.consts.DISPLAY_SWITCHER?_.options.switcher.initialState===_.consts.SWITCHER_STATE_FIRST?_.consts.SWITCHER_STATE_FIRST:_.consts.SWITCHER_STATE_SECOND:undefined;if(_.source.closest('label')){_.label=_.source.closest('label')}else if(_.source.hasAttribute('id')&&document.querySelector('[for="'+_.source.getAttribute('id')+'"]')){_.label=document.querySelector('[for="'+_.source.getAttribute('id')+'"]')}if(_.options.wrapper){_.options.wrapper=_.options.wrapper instanceof HTMLElement?_.options.wrapper:document.querySelector(element);}else if(_.source.closest('label')){_.options.wrapper=document.createElement('div');_.label.parentNode.insertBefore(_.options.wrapper,_.label);_.options.wrapper.appendChild(_.label);}else{_.options.wrapper=document.createElement('div');_.source.parentNode.insertBefore(_.options.wrapper,_.source);_.options.wrapper.appendChild(_.source)}if(_.options.display===_.consts.DISPLAY_POPUP&&_.options.sizingElement===_.consts.SIZING_WRAPPER){_.sizingElement=_.options.wrapper}_.init()}return Duration}());Duration.prototype.buildWidget=function(){let _=this;if(_.options.display===_.consts.DISPLAY_SWITCHER){let additionalContainer=document.createElement('div');additionalContainer.classList.add('additional-container');additionalContainer.innerHTML=_.options.wrapper.innerHTML;while(_.options.wrapper.firstChild){_.options.wrapper.removeChild(_.options.wrapper.firstChild)}_.options.wrapper.appendChild(additionalContainer)}_.setupContainer();_.setupLegend();_.setupInputs();switch(_.options.display){case _.consts.DISPLAY_BOTH:_.setupBoth();break;case _.consts.DISPLAY_WIDGET:_.setupWidget();break;case _.consts.DISPLAY_POPUP:_.setupPopup();break;case _.consts.DISPLAY_SWITCHER:_.setupSwitcher();break}};Duration.prototype.destroy=function(){let _=this;_.source.classList.remove(_.options.cssClass);switch(_.options.display){case _.consts.DISPLAY_BOTH:_.destroyBoth();break;case _.consts.DISPLAY_WIDGET:_.destroyWidget();break;case _.consts.DISPLAY_POPUP:_.destroyPopup();break;case _.consts.DISPLAY_SWITCHER:_.destroySwitcher();break}_.source.classList.remove(_.options.cssClass);_.source.dispatchEvent(new Event('durationdestroyed'))};Duration.prototype.destroyBoth=function(){let _=this;_.options.wrapper.removeChild(_.container);_.options.wrapper.parentNode.insertBefore(_.options.wrapper.firstElementChild,_.options.wrapper);_.options.wrapper.parentNode.removeChild(_.options.wrapper)};Duration.prototype.destroyPopup=function(){let _=this;_.destroyBoth();window.removeEventListener('scroll',_.hidePopup.bind(_));window.removeEventListener('resize',_.hidePopup.bind(_));document.removeEventListener('focus',_.handlePopup.bind(_),true);document.removeEventListener('click',_.handlePopup.bind(_))};Duration.prototype.destroySwitcher=function(){let _=this;_.options.wrapper.removeChild(_.container);_.options.wrapper.removeChild(_.switcher);_.options.wrapper.parentNode.insertBefore(_.options.wrapper.firstElementChild.firstElementChild,_.options.wrapper);_.options.wrapper.parentNode.removeChild(_.options.wrapper)};Duration.prototype.destroyWidget=function(){let _=this;_.destroyBoth();if(_.label){_.label.style.removeProperty('display')}_.source.style.removeProperty('display')};Duration.prototype.generateId=function(){let id='';let characters='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';let charactersLength=characters.length;for(let i=0;i<10;i+=1){id+=characters.charAt(Math.floor(Math.random()*charactersLength))}return id};Duration.prototype.handleInput=function(event){let _=this;if(event.target.matches('[data-designator]')){_.setSourceValue()}if(event.target===_.source){_.setWidgetValue()}};Duration.prototype.handlePopup=function(event){let _=this;if(_.options.wrapper.contains(event.target)){_.showPopup();return}_.hidePopup()};Duration.prototype.hidePopup=function(){let _=this;window.removeEventListener('scroll',_.hidePopup.bind(_));window.removeEventListener('resize',_.hidePopup.bind(_));_.container.style.setProperty('display','none');_.popupVisible=false};Duration.prototype.initializeEvents=function(){let _=this;document.addEventListener('input',_.handleInput.bind(_))};Duration.prototype.padWithZeroes=function(value){let _=this,multiplier,output;multiplier=1;for(let i=0;i<_.options.precision;i+=1){multiplier*=10}output=Math.floor(value*multiplier);while((''+output).length<_.options.precision){output='0'+output}return output};Duration.prototype.setupBoth=function(){let _=this;if(_.legend){_.legend.classList.add(_.options.screenReaderText)}};Duration.prototype.setupContainer=function(){let _=this,container,innerContainer;container=document.createElement('fieldset');container.setAttribute('id',_.generateId());container.classList.add(_.containerCssClass);_.container=container;_.options.wrapper.appendChild(_.container);innerContainer=document.createElement('div');innerContainer.classList.add('inner-container');_.innerContainer=innerContainer;_.container.appendChild(innerContainer)};Duration.prototype.setupInputs=function(){let _=this;_.options.inputs.forEach(function(period){_.setupPeriod(period)})};Duration.prototype.setupPeriod=function(period){let _=this,periodContainer,periodLabelText,periodInput;periodContainer=document.createElement('label');periodLabelText=document.createElement('span');periodLabelText.innerText=_.options.labels[period];periodContainer.appendChild(periodLabelText);periodInput=document.createElement('input');periodInput.setAttribute('data-designator',_.consts['DESIGNATOR_'+period.toUpperCase()]);periodInput.setAttribute('type','number');periodInput.setAttribute('min','0');periodInput.setAttribute('step','1');periodInput.value=_.options.initialValue[period];periodContainer.appendChild(periodInput);_.inputs.push(periodInput);_.innerContainer.appendChild(periodContainer)};Duration.prototype.setupLegend=function(){let _=this,labelText,legend;if(_.label){labelText=_.label.textContent.trim()}if(labelText&&labelText.length>0){legend=document.createElement('legend');legend.innerText=labelText;_.container.insertAdjacentElement('afterbegin',legend);_.legend=legend}};Duration.prototype.setupPopup=function(){let _=this;_.container.style.setProperty('display','none');_.innerContainer.style.setProperty('margin-top','0');if(_.legend){_.legend.classList.add(_.options.screenReaderText)}document.addEventListener('focus',_.handlePopup.bind(_),true);document.addEventListener('click',_.handlePopup.bind(_))};Duration.prototype.setupSwitcher=function(){let _=this,template,firstId,secondId,switcherId,additionalContainer;_.additionalContainer=_.options.wrapper.querySelector('.additional-container');firstId=_.generateId();secondId=_.generateId();switcherId=_.generateId();template='<button type="button" class="switcher" id="'+switcherId+'"><span id="'+firstId+'">'+_.options.switcher.firstLabel+'</span><span id="'+secondId+'">'+_.options.switcher.secondLabel+'</span></button>';_.options.wrapper.insertAdjacentHTML('afterbegin',template);_.switcher=document.getElementById(switcherId);if(_.switcherState===_.consts.SWITCHER_STATE_FIRST){_.switcher.lastElementChild.setAttribute('aria-hidden','true');_.container.style.setProperty('display','none')}else{_.switcher.firstElementChild.setAttribute('aria-hidden','true');_.additionalContainer.style.setProperty('display','none')}_.switcher.addEventListener('click',function(event){if(_.switcherState===_.consts.SWITCHER_STATE_FIRST){_.additionalContainer.style.setProperty('display','none');_.container.style.removeProperty('display');_.switcher.lastElementChild.removeAttribute('aria-hidden');_.switcher.firstElementChild.setAttribute('aria-hidden','true');_.switcher.classList.add(_.consts.SWITCHER_STATE_SECOND);_.switcherState=_.consts.SWITCHER_STATE_SECOND}else{_.additionalContainer.style.removeProperty('display');_.container.style.setProperty('display','none');_.switcher.lastElementChild.setAttribute('aria-hidden','true');_.switcher.firstElementChild.removeAttribute('aria-hidden');_.switcher.classList.remove(_.consts.SWITCHER_STATE_SECOND);_.switcherState=_.consts.SWITCHER_STATE_FIRST}})};Duration.prototype.setupWidget=function(){let _=this;if(_.label){_.label.style.setProperty('display','none')}_.source.style.setProperty('display','none')};Duration.prototype.setSourceValue=function(){let _=this,value,fraction;switch(_.options.outputFormat){case _.consts.FORMAT_DECIMAL:value='0';fraction=0;_.inputs.forEach(function(input){if(input.getAttribute('data-designator')===_.consts.DESIGNATOR_HOURS&&input.value>0){value=input.value}if(input.getAttribute('data-designator')===_.consts.DESIGNATOR_MINUTES){value+='.';if(_.options.inputs.indexOf('seconds')>0){fraction+=input.value/60}else{value+=_.padWithZeroes(input.value/60)}}if(input.getAttribute('data-designator')===_.consts.DESIGNATOR_SECONDS){fraction+=input.value/3600;value+=_.padWithZeroes(fraction)}});break;case _.consts.FORMAT_ISO:value='P';const designators=[_.consts.DESIGNATOR_YEARS,_.consts.DESIGNATOR_MONTHS,_.consts.DESIGNATOR_WEEKS,_.consts.DESIGNATOR_DAYS];let insertTime=true;_.inputs.forEach(function(input){if(designators.indexOf(input.getAttribute('data-designator'))<0&&insertTime){value+='T';insertTime=false}if(input.value>0){value+=input.value+input.getAttribute('data-designator').toUpperCase()}});if(value==='PT'){value+='0S'}break}_.source.value=value;_.source.dispatchEvent(new Event('input'))};Duration.prototype.setWidgetValue=function(){let _=this;switch(_.options.outputFormat){case _.consts.FORMAT_DECIMAL:_.updateDecimalWidget();break;case _.consts.FORMAT_ISO:_.updateIsoWidget();break}};Duration.prototype.showPopup=function(){let _=this,rect;rect=_.sizingElement.getBoundingClientRect();_.container.style.setProperty('position','fixed');_.container.style.setProperty('margin','0');_.container.style.setProperty('left',rect.left+'px');_.container.style.setProperty('width',rect.width+'px');_.container.style.setProperty('top',(+rect.top+ +rect.height)+'px');_.container.style.removeProperty('display');if(!_.popupVisible){window.addEventListener('scroll',_.hidePopup.bind(_));window.addEventListener('resize',_.hidePopup.bind(_))}_.popupVisible=true};Duration.prototype.updateDecimalWidget=function(){let _=this,hours,minutes,seconds,hoursInput,minutesInput,secondsInput;hours=Math.floor(_.source.value);minutes=_.source.value-hours;hoursInput=_.options.wrapper.querySelector('[data-designator="'+_.consts.DESIGNATOR_HOURS+'"]');minutesInput=_.options.wrapper.querySelector('[data-designator="'+_.consts.DESIGNATOR_MINUTES+'"]');secondsInput=_.options.wrapper.querySelector('[data-designator="'+_.consts.DESIGNATOR_SECONDS+'"]');if(hoursInput){hoursInput.value=hours;hoursInput.dispatchEvent(new Event('input'))}if(minutesInput){minutesInput.value=Math.floor(minutes*60);minutesInput.dispatchEvent(new Event('input'))}if(secondsInput){seconds=_.source.value-hours-Math.floor(minutes*60)/60;secondsInput.value=Math.floor(seconds*3600);secondsInput.dispatchEvent(new Event('input'))}};Duration.prototype.updateIsoWidget=function(){let _=this,values,designator,value,index,T;values=_.source.value.split(/([TYMWDHS]|\d+)/);values=values.filter(function(value){return value.length>0});_.inputs.forEach(function(input){designator=input.getAttribute('data-designator');value=0;if(designator==='m'){index=values.indexOf('M');T=values.indexOf('T');if(index>0&&index<T&&Math.floor(values[index-1])>0){value=Math.floor(values[index-1])}}else{index=values.lastIndexOf(designator);if(index>0&&Math.floor(values[index-1])>0){value=Math.floor(values[index-1])}}input.value=value;input.dispatchEvent(new Event('input'))})};Duration.prototype.init=function(){let _=this;if(!_.source.classList.contains(_.options.cssClass)){_.buildWidget();_.setSourceValue();_.initializeEvents();_.source.classList.add(_.options.cssClass);_.source.dispatchEvent(new Event('durationinitialized'))}};if(typeof module!=='undefined'&&typeof module.exports!=='undefined'){module.exports=Duration}else{window.Duration=Duration}})();new Duration('#demo-simple',{outputFormat:'decimal'});new Duration('#demo-initial-value',{initialValue:{minutes:'30',hours:'1'},inputs:['hours','minutes','seconds'],outputFormat:'iso'});new Duration('#demo-labels',{inputs:['hours','minutes','seconds'],labels:{seconds:'seconds',minutes:'minutes',hours:'hours'},outputFormat:'decimal',precision:6});new Duration('#demo-widget',{display:'widget',labels:{minutes:'even longer minutes',hours:'long hours'},outputFormat:'decimal'});new Duration('#demo-popup',{display:'popup',outputFormat:'decimal',sizingElement:'wrapper'});new Duration('#demo-switcher',{display:'switcher',outputFormat:'decimal',switcher:{firstLabel:'decimal time',secondLabel:'normal time'}});</script>
</body>
</html>
